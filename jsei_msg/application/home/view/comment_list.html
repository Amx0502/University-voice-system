<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>å¤§å­¦ä¹‹å£°ç³»ç»Ÿ</title>
        <link rel="stylesheet" href="./public/css/house.css" />
        <style>
        </style>
    </head>
    <body>
        <div id="box">
            <div class="comment_info1">
                <a class="login" href="index.php?p=admin">ç®¡ç†å‘˜ç™»å½•</a>
                <a class="login" href="index.php?p=user&c=user&a=logout">é€€å‡ºç™»å½•</a>
                <a class="login" href="index.php?p=user&c=user&a=register">æ³¨å†Œç”¨æˆ·</a>
                <h1>å¤§å­¦ä¹‹å£°ç³»ç»Ÿ</h1>
            </div>
            <div class="postbox">
                <form method="post" action="index.php?p=home&c=comment&a=add">
                    <ul class="userbox">
                        <li>å§“å:</li>
                        <li class="user_name">
                            <input type="text" name="poster">
                        </li>
                        <li>é‚®ç®±:</li>
                        <li class="user_email">
                            <input type="text" name="mail">
                        </li>
                        <li class="lock">
                            <input type="checkbox" name="is_private" value="1">
                        </li>
                        <li><label for="is_private">ğŸ”’ç§å¯†</label></li>
                        <li class="user_post">
                            <input class="post_button" value="å‘å¸ƒ" type="submit">
                        </li>
                    </ul>
                    <textarea name="comment" placeholder="åœ¨æ­¤è¾“å…¥ç•™è¨€" required></textarea>
                </form>
            </div>
            <div class="comment_info">
                ç•™è¨€æ•°:<?php echo $num;?>
                <span class="sort">æ’åºæ–¹å¼:
                    <a href="index.php" <?php if(!isset($_GET['sort'])) echo 'class="curr"';?>>æ­£åº</a>
                    <a href="index.php?sort=desc"
                        <?php if(isset($_GET['sort']) && $_GET['sort']=='desc') echo 'class="curr"';?>>å€’åº</a>
                </span>
            </div>
            <ul class="comments">
                <?php foreach ($data as $v): ?>
                <?php if ($v['is_private'] != 1): ?> <!-- æ£€æŸ¥is_privateæ˜¯å¦ä¸ç­‰äº1 -->
                <li>
                    <p>ç”¨æˆ·å: <?php echo htmlspecialchars($v['poster']); ?></p>
                    <p><?php echo htmlspecialchars($v['comment']); ?></p>
                    <p>å‘è¡¨æ—¶é—´: <?php echo htmlspecialchars($v['date']); ?></p>
                    <div class="comment_info">
                        <span class="sort">
                            <a
                                href="index.php?p=user&c=user&a=report&id=<?php echo htmlspecialchars($v['id']); ?>">ğŸš«ä¸¾æŠ¥</a>
                            <?php echo htmlspecialchars($v['id']); ?>æ¥¼
                            <a href="index.php?p=user&c=user&a=likes&id=<?php echo htmlspecialchars($v['id']); ?>">ğŸ‘ç‚¹èµ:
                                <?php echo htmlspecialchars($v['likes']); ?></a>
                            <a href="index.php?p=user&c=user&a=stepon&id=<?php echo htmlspecialchars($v['id']); ?>">ğŸ‘è¸©:
                                <?php echo htmlspecialchars($v['step_on']); ?></a>
                        </span>
                    </div>
                    <?php if ($v['reply'] !== ''): ?>
                    <ul class="comment_reply">
                        <li>
                            <p>ç®¡ç†å‘˜å›å¤:</p>
                            <p><?php echo htmlspecialchars($v['reply']); ?></p>
                            <?php if ($v['reply2'] != ''): ?>
                            <p>ç”¨æˆ·å›å¤:</p>
                            <p><?php echo htmlspecialchars($v['reply2']); ?></p>
                            <?php endif; ?>
                        </li>
                        <div class="comment_info">
                            <span class="sort1" style="float: right;">
                                <a onclick="fun1(this)">å›å¤</a>
                                <form class="relpy" style="display: none;float: left;" method="post"
                                    action="index.php?p=home&c=comment&a=add1&id=<?php echo htmlspecialchars($v['id']); ?>">
                                    <input type="text" name="reply2" placeholder="åœ¨æ­¤è¾“å…¥å›å¤">
                                    <input type="submit" value="å›å¤">
                                    <input type="hidden" name="id" value="<?php echo htmlspecialchars($v['id']); ?>" />
                                </form>
                            </span>
                        </div>
                    </ul>
                    <?php endif; ?>
                </li>
                <?php endif; ?> <!-- ç»“æŸis_privateæ£€æŸ¥ -->
                <?php endforeach; ?>
            </ul>
            <div class="comments_footer">
                <?php echo $pageList; ?>
            </div>
        </div>
    </body>
    <script>
        function fun1(link) {
            var sortSpan = link.parentNode.querySelector('.relpy');
            if (sortSpan.style.display === 'none') {
                sortSpan.style.display = 'block'; // æ˜¾ç¤ºè¡¨å•  
            } else {
                sortSpan.style.display = 'none'; // éšè—è¡¨å•  
            }
        }
    </script>
</html>